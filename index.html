<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solo Leveling</title>
<style>
:root {
  --glow: #7f5cff;
  --bg-glass: rgba(10,10,25,0.85);
}
body {
  margin:0; font-family:"Segoe UI", Arial, sans-serif;
  color:#eaeaff;
  background: url("background.jpg") center/cover fixed no-repeat;
  overflow-x: hidden;
}

/* LOGIN */
#login {height:100vh; display:flex; justify-content:center; align-items:center;}
.login-box {
  background: var(--bg-glass); padding:30px; border-radius:14px;
  border:1px solid var(--glow); box-shadow:0 0 25px rgba(127,92,255,0.4); width:300px;
}
.login-box h2 {text-align:center; color:var(--glow);}
input, button {width:100%; padding:10px; margin-top:12px; border-radius:6px; border:none; outline:none;}
input{background:#111;color:white;}
button{background:linear-gradient(135deg,#7f5cff,#3b2fff); color:white; font-weight:bold; cursor:pointer;}

/* DASHBOARD */
#content {display:none;}
/* SIDEBAR */
#menu {
  position:fixed; left:-220px; top:0; width:200px; height:100vh;
  background:var(--bg-glass); padding:20px; transition:0.3s; z-index:1000;
}
#menu h3{color:var(--glow); margin-bottom:15px;}
.menu-btn{padding:12px; margin-bottom:10px; border:none; background:linear-gradient(135deg,#7f5cff,#3b2fff); color:white; border-radius:8px; cursor:pointer; text-align:left; font-weight:bold; width:100%;}
/* MAIN AREA */
#main {margin-left:0; transition:0.3s; padding:20px;}
section {display:none; background:rgba(10,10,25,0.75); padding:20px; border-radius:14px; border:1px solid rgba(127,92,255,0.4); box-shadow:0 0 20px rgba(127,92,255,0.2); margin-bottom:20px;}
section h2{color:var(--glow); border-left:4px solid var(--glow); padding-left:10px; margin-bottom:15px;}

/* GALLERY GRID */
#photoGallery, #videoGallery {display:grid; grid-template-columns: repeat(auto-fill,minmax(120px,1fr)); gap:10px;}
#photoGallery img, #videoGallery video {border-radius:8px; cursor:pointer;}

/* HABITS */
.habit{display:flex;justify-content:space-between;margin:10px 0;padding:8px 12px;background:rgba(0,0,0,0.4);border-radius:8px;}

/* UPLOAD BUTTONS */
.upload-btn {margin-top:10px;padding:10px;border:none;border-radius:6px;background:linear-gradient(135deg,#7f5cff,#3b2fff); color:white; cursor:pointer;}

/* MUSIC EQUALIZER */
.equalizer{position:fixed; bottom:20px; left:20px; width:70px; cursor:pointer; filter:drop-shadow(0 0 10px var(--glow));}
.bar{transform-origin:bottom;animation:bounce 1.2s infinite ease-in-out; fill:#bfa8ff;}
.playing .bar{animation-duration:0.6s;}
@keyframes bounce{0%,100%{transform:scaleY(0.3);}50%{transform:scaleY(1);}}
/* MODAL */
.modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:1000;}
.modal img, .modal video{max-width:90%; max-height:90%; border-radius:10px;}

/* MENU TOGGLE BUTTON */
#menuToggle {position:fixed;top:20px;left:20px;z-index:1001; padding:10px; border:none; background:linear-gradient(135deg,#7f5cff,#3b2fff); color:white; border-radius:8px; cursor:pointer;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login">
  <div class="login-box">
    <h2>LOGIN</h2>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">ENTER</button>
    <p id="error" style="color:#ff6b6b;"></p>
  </div>
</div>

<!-- DASHBOARD -->
<div id="content">
  <!-- MENU TOGGLE -->
  <button id="menuToggle">â˜°</button>

  <!-- SIDEBAR -->
  <div id="menu">
    <h3>MENU</h3>
    <button class="menu-btn" onclick="showSection('photoSection')">Photos</button>
    <button class="menu-btn" onclick="showSection('videoSection')">Videos</button>
    <button class="menu-btn" onclick="showSection('habitSection')">Habits</button>
    <button class="menu-btn" onclick="toggleMusic()">Music</button>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main">
    <!-- MUSIC -->
    <audio id="music" loop>
      <source src="music.mp3" type="audio/mp3">
    </audio>
    <svg class="equalizer" id="equalizer" viewBox="0 0 100 100" onclick="toggleMusic()">
      <rect class="bar" x="10" y="20" width="10" height="60"/>
      <rect class="bar" x="30" y="20" width="10" height="60"/>
      <rect class="bar" x="50" y="20" width="10" height="60"/>
      <rect class="bar" x="70" y="20" width="10" height="60"/>
      <rect class="bar" x="90" y="20" width="10" height="60"/>
    </svg>

    <!-- PHOTOS -->
    <section id="photoSection">
      <h2>Photos</h2>
      <input type="file" id="photoUpload" accept="image/*">
      <button class="upload-btn" onclick="uploadFile('photo')">Upload Photo</button>
      <div id="photoGallery"></div>
      <div id="photoModal" class="modal"><img id="modalPhoto" src=""></div>
    </section>

    <!-- VIDEOS -->
    <section id="videoSection">
      <h2>Videos</h2>
      <input type="file" id="videoUpload" accept="video/*">
      <button class="upload-btn" onclick="uploadFile('video')">Upload Video</button>
      <div id="videoGallery"></div>
      <div id="videoModal" class="modal"><video id="modalVideo" controls></video></div>
    </section>

    <!-- HABITS -->
    <section id="habitSection">
      <h2>Daily Habits</h2>
      <div class="habit"><span>Workout</span><input type="checkbox" onchange="saveHabit('Workout',this.checked)"></div>
      <div class="habit"><span>Study</span><input type="checkbox" onchange="saveHabit('Study',this.checked)"></div>
      <div class="habit"><span>Meditation</span><input type="checkbox" onchange="saveHabit('Meditation',this.checked)"></div>
    </section>
  </div>
</div>

<!-- FIREBASE SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCFzIAZ5F5YRQJ3zjOb0U9KJGI6aed_WKI",
  authDomain: "sololeveling-b9f87.firebaseapp.com",
  projectId: "sololeveling-b9f87",
  storageBucket: "sololeveling-b9f87.appspot.com",
  messagingSenderId: "85355794256",
  appId: "1:85355794256:web:5e0b8e52d81d01cb202655"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

/* LOGIN */
function login() {
  const loginBox = document.getElementById("login");
  const contentBox = document.getElementById("content");
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  auth.signInWithEmailAndPassword(email,password)
    .then(()=>{ loginBox.style.display="none"; contentBox.style.display="block"; showSection('photoSection'); loadGallery(); })
    .catch(err=>{ document.getElementById("error").innerText = err.message; });
}

/* MUSIC */
function toggleMusic(){
  const m = document.getElementById("music");
  const e = document.getElementById("equalizer");
  if(m.paused){ m.play(); e.classList.add("playing"); }
  else{ m.pause(); e.classList.remove("playing"); }
}

/* SHOW SECTION */
function showSection(id){
  const sections = ['photoSection','videoSection','habitSection'];
  sections.forEach(s=>document.getElementById(s).style.display="none");
  document.getElementById(id).style.display="block";
}

/* HABITS */
function saveHabit(name,value){
  db.collection("habits").add({
    habit:name, completed:value,
    date:new Date().toISOString().split("T")[0],
    uid:auth.currentUser.uid,
    createdAt:firebase.firestore.FieldValue.serverTimestamp()
  });
}

/* LOAD GALLERY */
function loadGallery(){
  const photoGallery = document.getElementById("photoGallery");
  const videoGallery = document.getElementById("videoGallery");
  photoGallery.innerHTML = ""; videoGallery.innerHTML = "";

  db.collection("media").orderBy("createdAt","desc").onSnapshot(snapshot=>{
    snapshot.forEach(doc=>{
      const data = doc.data();
      if(data.type==="photo"){
        const img = document.createElement("img");
        img.src = data.url;
        img.onclick = ()=>{ document.getElementById("photoModal").style.display="flex"; document.getElementById("modalPhoto").src=data.url; };
        photoGallery.appendChild(img);
      }
      if(data.type==="video"){
        const v = document.createElement("video");
        v.src = data.url; v.controls=true;
        v.onclick = ()=>{ 
          const modal = document.getElementById("videoModal"); 
          const modalVideo = document.getElementById("modalVideo");
          modal.style.display="flex"; modalVideo.src=data.url; modalVideo.play();
        };
        videoGallery.appendChild(v);
      }
    });
  });

  document.getElementById("photoModal").onclick = e=>{ if(e.target.id==="photoModal"){ e.target.style.display="none"; } };
  document.getElementById("videoModal").onclick = e=>{ if(e.target.id==="videoModal"){ const v=document.getElementById("modalVideo"); v.pause(); e.target.style.display="none"; } };
}

/* UPLOAD FILES */
function uploadFile(type){
  const fileInput = type==="photo"? document.getElementById("photoUpload") : document.getElementById("videoUpload");
  if(fileInput.files.length===0){ alert("Select a file"); return; }
  const file = fileInput.files[0];
  const path = `${type}s/${Date.now()}_${file.name}`;
  const storageRef = storage.ref(path);
  storageRef.put(file).then(snapshot=>{
    snapshot.ref.getDownloadURL().then(url=>{
      db.collection("media").add({ url:url, type:type, createdAt:firebase.firestore.FieldValue.serverTimestamp(), uid:auth.currentUser.uid });
      alert(type+" uploaded!"); fileInput.value="";
    });
  });
}

/* SIDEBAR TOGGLE */
const menu = document.getElementById("menu");
const main = document.getElementById("main");
const toggleBtn = document.getElementById("menuToggle");
let sidebarVisible = false;
toggleBtn.onclick = () => {
  if(!sidebarVisible){ menu.style.left="0"; main.style.marginLeft="220px"; }
  else{ menu.style.left="-220px"; main.style.marginLeft="0"; }
  sidebarVisible = !sidebarVisible;
};
</script>
</body>
</html>
