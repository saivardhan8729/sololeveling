<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Solo Leveling</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCFzIAZ5F5YRQJ3zjOb0U9KJGI6aed_WKI",
  authDomain: "sololeveling-b9f87.firebaseapp.com",
  projectId: "sololeveling-b9f87",
  storageBucket: "sololeveling-b9f87.appspot.com",
  messagingSenderId: "85355794256",
  appId: "1:85355794256:web:5e0b8e52d81d01cb202655"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const storage = getStorage();
const db = getFirestore();

/* -------- FIXED LOGIN -------- */
const EMAIL = "solo.levelling8729@gmail.com";
const PASSWORD = "saikrithi";

signInWithEmailAndPassword(auth, EMAIL, PASSWORD)
.catch(err => alert("Login Failed"));

onAuthStateChanged(auth, user => {
  if (user) loadPhotos();
});

/* -------- PHOTO UPLOAD -------- */
window.uploadPhoto = async () => {
  const file = document.getElementById("photoInput").files[0];
  if (!file) return alert("Choose photo");

  const storageRef = ref(storage, "photos/" + Date.now());
  await uploadBytes(storageRef, file);
  const url = await getDownloadURL(storageRef);

  await addDoc(collection(db, "photos"), {
    url,
    created: Date.now()
  });

  loadPhotos();
};

/* -------- LOAD GALLERY -------- */
async function loadPhotos() {
  const grid = document.getElementById("photoGrid");
  grid.innerHTML = "";

  const q = query(collection(db, "photos"), orderBy("created","desc"));
  const snap = await getDocs(q);

  snap.forEach(doc => {
    const img = document.createElement("img");
    img.src = doc.data().url;
    img.onclick = () => openFull(img.src);
    grid.appendChild(img);
  });
}
</script>

<style>
body{background:black;color:white;margin:0;font-family:Arial}
.menu-btn{position:fixed;top:16px;left:16px;width:52px;height:52px;border-radius:50%;background:#222;color:white;font-size:26px;display:flex;align-items:center;justify-content:center;z-index:10}
.sidebar{position:fixed;left:-260px;top:0;width:260px;height:100%;background:#12001f;padding-top:90px;transition:.3s;z-index:11}
.sidebar.open{left:0}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(6px);display:none;z-index:10}
.menu-item{padding:16px;font-size:18px;cursor:pointer;animation:glow 2s infinite alternate}
@keyframes glow{from{text-shadow:0 0 5px #8a2be2}to{text-shadow:0 0 20px #b84cff}}
section{display:none;padding:90px 16px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px}
.grid img{width:100%;border-radius:8px;cursor:pointer}
.full{position:fixed;inset:0;background:black;display:none;align-items:center;justify-content:center;z-index:20}
.full img{max-width:95%;max-height:95%}
.close{position:absolute;top:20px;right:20px;font-size:26px}
.equalizer{position:fixed;bottom:16px;left:16px;display:flex;gap:4px}
.bar{width:5px;background:#8a2be2;animation:bounce 1s infinite alternate}
@keyframes bounce{from{height:6px}to{height:26px}}
</style>

<body>

<div class="menu-btn" onclick="toggle()">â˜°</div>
<div class="overlay" onclick="closeSide()"></div>

<div class="sidebar" id="side">
  <div class="menu-item" onclick="show('photos')">ðŸ“¸ Photos</div>
</div>

<section id="photos">
  <input type="file" id="photoInput">
  <button onclick="uploadPhoto()">Upload Photo</button>
  <br><br>
  <div class="grid" id="photoGrid"></div>
</section>

<div class="full" id="full">
  <span class="close" onclick="closeFull()">âœ–</span>
  <img id="fullImg">
</div>

<div class="equalizer">
  <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
</div>

<script>
function toggle(){side.classList.toggle("open");overlay.style.display="block"}
function closeSide(){side.classList.remove("open");overlay.style.display="none"}
function show(id){document.querySelectorAll("section").forEach(s=>s.style.display="none");document.getElementById(id).style.display="block";closeSide()}
function openFull(src){full.style.display="flex";fullImg.src=src}
function closeFull(){full.style.display="none"}
</script>

</body>
</html>
